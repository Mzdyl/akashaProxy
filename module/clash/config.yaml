# clashMetaé…ç½®å‚è€ƒå¯ä»¥çœ‹çœ‹è¿™ä¸ªwiki
# https://docs.metacubex.one/
# https://clash-meta.wiki

# å®˜æ–¹clashé…ç½®(çº¯è‹±æ–‡)
# https://github.com/Dreamacro/clash/wiki/Configuration#introduction
  
proxies:
p: &p #è®¢é˜…é…ç½®
  {type: http, interval: 1800, health-check: {enable: true, url: http://cp.cloudflare.com/generate_204, interval: 300}}
pr: &pr #ç­–ç•¥ç»„
  {type: select, proxies: [DIRECT, REJECT, ğŸš€æ‰‹åŠ¨é€‰æ‹©, â™»ï¸è‡ªåŠ¨é€‰æ‹©, ğŸ”¯è´Ÿè½½å‡è¡¡, ğŸ› æ•…éšœè½¬ç§», ğŸ‡­ğŸ‡°é¦™æ¸¯ä¸ğŸ‡¹ğŸ‡¼å°æ¹¾, ğŸ‡¯ğŸ‡µæ—¥æœ¬ä¸ğŸ‡¸ğŸ‡¬æ–°åŠ å¡, ğŸ‡ºğŸ‡¸ç¾å›½, ğŸŒå…¶å®ƒåœ°åŒº, ğŸŒå…¨éƒ¨èŠ‚ç‚¹]}
  
u: &u #æœºåœº
  type: url-test
# type: load-balance
# strategy: consistent-hashing # consistent-hashing / round-robin

  use:
  - æœºåœº1 #æœºåœºå
  # - æœºåœº2 #æœºåœºå


# ä»£ç†æä¾›(è®¢é˜…)ç»„
#æ·»åŠ /ä¿®æ”¹æœºåœº(å)è¯·ä¿è¯proxy-providersåç§°å’Œproxy-groupsåŒæ­¥æ·»åŠ /ä¿®æ”¹
proxy-providers:
  æœºåœº1: #æœºåœºå
    <<: *p
    url: "è¿™é‡Œå¡«æœºåœºè®¢é˜…"
    path: ./proxy_providers/jichang1.yaml #ä¿å­˜è·¯å¾„

  # æœºåœº2: #æœºåœºå
    # <<: *p
    # url: "è¿™é‡Œå¡«æœºåœºè®¢é˜…"
    # path: ./proxy_providers/jichang2.yaml #ä¿å­˜è·¯å¾„


# ä»£ç†ç»„
proxy-groups:
#æ¨¡å¼é€‰æ‹©
  - {name: ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿, type: select, proxies: [DIRECT, REJECT, ğŸš€æ‰‹åŠ¨é€‰æ‹©, â™»ï¸è‡ªåŠ¨é€‰æ‹©, ğŸ”¯è´Ÿè½½å‡è¡¡, ğŸ› æ•…éšœè½¬ç§»]}
  - {name: ğŸš€æ‰‹åŠ¨é€‰æ‹©, type: select, proxies: [DIRECT, REJECT, â™»ï¸è‡ªåŠ¨é€‰æ‹©, ğŸ”¯è´Ÿè½½å‡è¡¡, ğŸ› æ•…éšœè½¬ç§», ğŸ‡­ğŸ‡°é¦™æ¸¯ä¸ğŸ‡¹ğŸ‡¼å°æ¹¾, ğŸ‡¯ğŸ‡µæ—¥æœ¬ä¸ğŸ‡¸ğŸ‡¬æ–°åŠ å¡, ğŸ‡ºğŸ‡¸ç¾å›½, ğŸŒå…¶å®ƒåœ°åŒº, ğŸŒå…¨éƒ¨èŠ‚ç‚¹]}
  - {name: â™»ï¸è‡ªåŠ¨é€‰æ‹©, <<: *u, tolerance: 2, type: url-test}
  - {name: ğŸ”¯è´Ÿè½½å‡è¡¡, <<: *u, tolerance: 2, type: load-balance}
  - {name: ğŸ› æ•…éšœè½¬ç§», type: fallback, proxies: [ğŸ‡­ğŸ‡°é¦™æ¸¯ä¸ğŸ‡¹ğŸ‡¼å°æ¹¾, ğŸ‡¯ğŸ‡µæ—¥æœ¬ä¸ğŸ‡¸ğŸ‡¬æ–°åŠ å¡, ğŸ‡ºğŸ‡¸ç¾å›½, ğŸŒå…¶å®ƒåœ°åŒº, ğŸŒå…¨éƒ¨èŠ‚ç‚¹]}

#åœ°åŒºèŠ‚ç‚¹ç­›é€‰

  - {name: ğŸ‡­ğŸ‡°é¦™æ¸¯ä¸ğŸ‡¹ğŸ‡¼å°æ¹¾, <<: *u, filter: "(?i)(æ¸¯|hk|hongkong|å°|tw|taiwan)"}
  - {name: ğŸ‡¯ğŸ‡µæ—¥æœ¬ä¸ğŸ‡¸ğŸ‡¬æ–°åŠ å¡, <<: *u, filter: "(?i)(æ–°|sg|singapore|æ—¥æœ¬|jp|japan)"}
  - {name: ğŸ‡ºğŸ‡¸ç¾å›½, <<: *u, filter: "(?i)(ç¾|us|unitedstates|united states)"}
  - {name: ğŸŒå…¶å®ƒåœ°åŒº, <<: *u, filter: "(?i)^(?!.*(?:ğŸ‡­ğŸ‡°|ğŸ‡¯ğŸ‡µ|ğŸ‡ºğŸ‡¸|ğŸ‡¸ğŸ‡¬|ğŸ‡¨ğŸ‡³|æ¸¯|hk|hongkong|å°|tw|taiwan|æ—¥|jp|japan|æ–°|sg|singapore|ç¾|us|unitedstates))"}
  - {name: ğŸŒå…¨éƒ¨èŠ‚ç‚¹, <<: *u,type: select}
  
  
# åˆ†æµè§„åˆ™æä¾›(è®¢é˜…)ç»„
rule-providers:
# ç§‹é£å¹¿å‘Šè§„åˆ™Clashç‰ˆæœ¬
# Githubï¼šhttps://github.com/TG-Twilight/AWAvenue-Ads-Rule
# æ­¤ä¸ºåŸŸåæ‹¦æˆªè§„åˆ™ï¼Œè¯·æ ¹æ®å®é™…æƒ…å†µï¼Œè‡ªè¡Œè®¾ç½®ä¸ºREJECT/å¹¿å‘Šæ‹¦æˆªä¹‹ç±»çš„åˆ†ç»„ã€‚
  ç§‹é£å¹¿å‘Šè§„åˆ™:
    type: http
    behavior: domain
    format: yaml
    path: ./rule_providers/AWAvenue-Ads-Rule-Clash.yaml
    url: "https://raw.githubusercontent.com/TG-Twilight/AWAvenue-Ads-Rule/main/Filters/AWAvenue-Ads-Rule-Clash.yaml"
    interval: 60480

# åˆ†æµè§„åˆ™
rules:
  - AND,(AND,(DST-PORT,443),(NETWORK,UDP)),(NOT,((GEOSITE,cn))),REJECT # ç¦ç”¨quic(ä¸åŒ…æ‹¬å›½å†…)
  - AND,((PROCESS-NAME,clashMeta),(NETWORK,UDP)),REJECT

# å»å¹¿å‘Š
  - GEOSITE,category-ads-all,REJECT,no-resolve
  - RULE-SET,ç§‹é£å¹¿å‘Šè§„åˆ™,REJECT

  - GEOSITE,xiaomi,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOSITE,tencent,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOSITE,bytedance,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOSITE,douyu,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOSITE,huya,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOSITE,bilibili,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOSITE,category-games@cn,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOSITE,lanzou,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOSITE,microsoft@cn,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOSITE,apple@cn,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿  
  - GEOIP,cn,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  - GEOIP,private,DIRECT,no-resolve
  
#å…œåº•è§„åˆ™
  - GEOSITE,geolocation-!cn,ğŸš€æ‰‹åŠ¨é€‰æ‹©
  - GEOSITE,CN,ğŸ‡¨ğŸ‡³å›½å†…ç›´è¿
  
# å…œåº•è§„åˆ™
  - MATCH,ğŸš€æ‰‹åŠ¨é€‰æ‹©
  
  